<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        function getCookie(cname) {
        let name = cname + "=";
        let decodedCookie = decodeURIComponent(document.cookie);
        let ca = decodedCookie.split(';');
        for(let i = 0; i <ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) == ' ') {
            c = c.substring(1);
            }
            if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
            }
        }
        return "";
        }

      google.charts.load('current', {'packages':['bar']});
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);
      let total = getCookie("total");

      if (total != "") {
            var emmisionsTotal = ParseInt(total)
        } else {
            alert("No data found using average");
            var emmisionsTotal = 8110
        }
    

      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Comparisons', 'C02 levels'],
          ['you', emmisionsTotal],
          ['world average',3628],
          ['American average', 8110],
        ]);

        var options = {
          chart: {
            title: 'Compare your CO2 to the average american',
            subtitle: 'CO2 levels in Killograms',
          }
        };

        var data2 = google.visualization.arrayToDataTable([
          ['Comparisons', 'C02 levels'],
          ['you', emmisionsTotal],
          ['average american', 8110],
          ['amazon', 71540000000],
          ['texas power company', 101000000000],
          ['US govenment', 4713000000000],
          ['China', 10566000000000],
        ]);

        var options2 = {
          chart: {
            title: 'Compare your CO2 to the largest emitters',
            subtitle: 'CO2 levels in Killograms',
          }
        };

        var chart = new google.charts.Bar(document.getElementById('columnchart_material'));

        chart.draw(data, google.charts.Bar.convertOptions(options));

        var chart2 = new google.visualization.PieChart(document.getElementById('columnchart_bigGuys'));
        chart2.draw(data2, options2);
      }
    </script>
  </head>
  <body>
    <h1>Comparisons page</h1>
    <div id="columnchart_material" style="width: 800px; height: 300px;"></div>
    <div>
        <p>This is a comparison of the CO2 emissions in kg between you, the American average, and the global average.</p>
        <p>The American average is four times higher due to our reliance on decentralized transportation, accounting for 24% of total emissions</p>
        <p>How can we offset these amounts?</p>
        <p>Every American needs 200 trees to offset their annual transportation emissions, so plant a tree 
          <a href="https://preserve.nature.org/page/115621/donate/1?crid=mgzn&en_txn1=p_g.dfa.fd.gtues22
          .dtd.mb2.br&supporter.appealCode=AHOMQ221102W1SXX00&en_txn8=NewSch.ADPCGO2211PDMZNZZD02Z02-BZUZZ-DGAQ&nis=8">here!</a></p>
        <p>Alternatively the use of electric vehicles and centralized transit, think buses, trains, or subways, can help.</p>
        <p>EVs and buses drop daily transportation emissions by 60% and 45% respectively</p>
        <p>Trains can drop long distance transportation emissions by 33%, with some electric trains cutting by 91%</p>
        <p>You can support your local transportation initiatives <a href="https://www.publictransportation.org">here!</a></p>
    </div>
    <div id="columnchart_bigGuys" style="width: 800px; height: 300px;"></div>
    <div>
        <p>In comparison to the largest CO2 emitters it is hard to understand the value of your personal contribution</p>
        <p>However, a large amount of the emissions are due to transportation and related infrastructure</p>
        <p>By lifting individual and legal standards, changes can be made to help reduce emissions and approach carbon neutrality.</p>
        <p>To help change legal standards, make sure to vote and contact your representatives <a href="https://www.house.gov/representatives/find-your-representative">here!</a></p>
        <p>you can also contact your local lawmakers and voicing your want for legislation capping emmisions and raising emmision standards</p>
    </div>
  </body>
</html>
